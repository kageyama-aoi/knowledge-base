<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WSL2 ç’°å¢ƒæ§‹ç¯‰ã¾ã¨ã‚ & ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆé›†</title>
  <style>
    :root{
      --bg:#ffffff; --fg:#1f2937; --muted:#6b7280; --card:#f9fafb; --border:#e5e7eb; --accent:#2563eb; --ok:#059669; --warn:#b45309; --bad:#dc2626;
    }
    .dark{
      --bg:#0b1020; --fg:#e5e7eb; --muted:#9ca3af; --card:#141a2a; --border:#253046; --accent:#60a5fa; --ok:#34d399; --warn:#f59e0b; --bad:#f87171;
    }
    html,body{ height:100%; }
    body{ margin:0; background:var(--bg); color:var(--fg); font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, Arial, sans-serif; line-height:1.65;}
    .container{ max-width: 980px; margin:0 auto; padding: 24px; }
    header{ display:flex; justify-content:space-between; align-items:center; gap:16px; flex-wrap:wrap; margin-bottom: 24px; }
    h1{ font-size: clamp(1.4rem, 3vw, 2rem); margin:0 0 8px; line-height:1.2;}
    .subtitle{ color:var(--muted); margin-top:-2px; }
    .toolbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    button{
      border:1px solid var(--border); background: var(--card); color: var(--fg);
      padding:8px 12px; border-radius: 999px; cursor:pointer; font-weight:600;
      transition: all .2s ease;
    }
    button:hover{ border-color: var(--accent); background: color-mix(in srgb, var(--card) 90%, var(--accent)); }
    .grid{ display:grid; gap:24px; }
    .card{ background: var(--card); border:1px solid var(--border); border-radius:14px; padding: 20px; }
    h2{ font-size:1.25rem; margin:0 0 16px; border-left:4px solid var(--accent); padding-left:12px; }
    h3{ font-size:1.1rem; margin:16px 0 8px; color: var(--accent); }
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
      background: color-mix(in srgb, var(--accent) 15%, transparent);
      padding: .2em .4em;
      margin: 0;
      font-size: 85%;
      border-radius: 6px;
    }
    pre {
      background: #1f2937;
      color: #f9fafb;
      padding: 1em;
      border-radius: 8px;
      overflow-x: auto;
      border: 1px solid var(--border);
    }
    .dark pre {
      background: #0d1117;
    }
    pre > code {
      background: none;
      padding: 0;
      border-radius: 0;
      color: inherit;
      font-size: inherit;
    }
    .error { color: var(--bad); font-weight: bold; }
    .fix { color: var(--ok); font-weight: bold; }
    ul { padding-left: 20px; }
    li { margin-bottom: 0.5em; }

    /* --- Accordion for Troubleshooting --- */
    details.trouble-item {
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 12px;
      background: color-mix(in srgb, var(--bg) 50%, var(--card));
      transition: background .2s;
    }
    details.trouble-item[open] {
      background: var(--card);
    }
    details.trouble-item:last-of-type {
      margin-bottom: 0;
    }
    details.trouble-item summary {
      padding: 14px 16px;
      font-weight: 600;
      cursor: pointer;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    details.trouble-item summary::-webkit-details-marker { display: none; }
    details.trouble-item summary::before {
      content: 'â–¶'; font-size: 0.7em; transition: transform .2s ease;
    }
    details.trouble-item[open] > summary::before { transform: rotate(90deg); }
    .trouble-item .content { padding: 0 16px 16px; border-top: 1px solid var(--border); margin-top: 8px; }
    .trouble-item .content .error { margin-top: 16px; }

    @media print{
      .toolbar{ display:none !important; }
      body{ background:#fff; color:#000; }
      .card{ page-break-inside: avoid; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>WSL2 ç’°å¢ƒæ§‹ç¯‰ã¾ã¨ã‚ & ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆé›†</h1>
        <p class="subtitle">ã“ã“ã¾ã§ã®å­¦ç¿’ã¨å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼ä½“é¨“ã‚’æ•´ç†ã—ãŸè³‡æ–™ã§ã™ã€‚ä»Šå¾Œã®é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã®ãƒ™ãƒ¼ã‚¹ã‚„ã€å†ç™ºæ™‚ã®å‚è€ƒã«ã§ãã¾ã™ã€‚</p>
      </div>
      <div class="toolbar">
        <button id="toggleTheme" aria-label="ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ">ğŸŒ— ãƒ€ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒˆ</button>
      </div>
    </header>

    <div class="grid">
      <div class="card">
        <h2>1. åŸºæœ¬ã®æ•´ç†</h2>
        <h3>npm / Node.js</h3>
        <ul>
          <li><code>npm install</code> ã¯ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã€‚</li>
          <li>WSL ã¯ Windows ã¨åˆ¥ç’°å¢ƒã€‚Node/npm ã¯ <strong>WSL å†…ã«å…¥ã‚Œç›´ã™å¿…è¦ã‚ã‚Š</strong>ã€‚</li>
          <li><code>fnm</code>ï¼ˆFast Node Managerï¼‰ã‚’ä½¿ã†ã¨è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒå®¹æ˜“ã€‚</li>
        </ul>
        <pre><code># LTSç‰ˆNode.jsã‚’å°å…¥
fnm install --lts
fnm use --lts
node -v
npm -v</code></pre>

        <h3>Git</h3>
        <ul>
          <li>Git ã‚‚ WSL å´ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚</li>
          <li>SSHã‚­ãƒ¼ã¯ WSL å´ã§ç”Ÿæˆã—ã€GitHubã«ç™»éŒ²ã™ã‚‹ã®ãŒå®‰å…¨ã€‚</li>
        </ul>

        <h3>Docker</h3>
        <ul>
          <li>ã‚¨ãƒ³ã‚¸ãƒ³ã¯ Windows ã® Docker Desktopã€‚</li>
          <li>WSL ã‹ã‚‰ <code>docker</code> / <code>docker compose</code> ã§æ“ä½œã€‚</li>
          <li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ <code>/home/&lt;user&gt;</code> ã«ç½®ã„ãŸæ–¹ãŒé«˜é€Ÿã€‚</li>
        </ul>

        <h3>WSL ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h3>
        <ul>
          <li>æ™®æ®µã¯ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‹sudo ã§ä½œæ¥­ã™ã‚‹ã®ãŒå®‰å…¨ã€‚</li>
          <li>rootã§èµ·å‹•ï¼š<code>wsl -d Ubuntu -u root</code></li>
          <li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼š<code>wsl --set-default Ubuntu</code></li>
        </ul>
      </div>

      <div class="card">
        <h2>2. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆé›†</h2>
        <details class="trouble-item">
          <summary>Docker ã‚¨ãƒ³ã‚¸ãƒ³æ¥ç¶šã‚¨ãƒ©ãƒ¼</summary>
          <div class="content">
            <p class="error">unable to get image 'postgres:15.1' ... dockerDesktopLinuxEngine not found</p>
            <p class="fix">â†’ Docker Desktop ã‚’èµ·å‹•ã—ã€WSL Integration ã‚’ONã«ã—ã¦ <code>docker context use desktop-linux</code></p>
          </div>
        </details>
        <details class="trouble-item">
          <summary>fnm ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ä¾å­˜ä¸è¶³</summary>
          <div class="content">
            <p class="error">Not installing fnm due to missing dependencies (unzip)</p>
            <p class="fix">â†’ <code>sudo apt install unzip</code> ã§è§£æ±º</p>
          </div>
        </details>
        <details class="trouble-item">
          <summary>sudo å®Ÿè¡Œæ™‚ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¦æ±‚</summary>
          <div class="content">
            <p class="error">sudo: a password is required</p>
            <p class="fix">â†’ rootã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ <code>passwd &lt;ãƒ¦ãƒ¼ã‚¶ãƒ¼&gt;</code> ã§å†è¨­å®š</p>
          </div>
        </details>
        <details class="trouble-item">
          <summary>GitHub CLI ãŒèªè­˜ã•ã‚Œãªã„</summary>
          <div class="content">
            <p class="error">'gh' is not recognized as a command</p>
            <p class="fix">â†’ Windowsã¯ <code>winget install --id GitHub.cli</code>ã€WSLã¯ <code>sudo apt install gh</code></p>
          </div>
        </details>
        <details class="trouble-item">
          <summary>docker-compose.yml ã®è­¦å‘Š</summary>
          <div class="content">
            <p class="error">the attribute `version` is obsolete</p>
            <p class="fix">â†’ YAMLã‹ã‚‰ <code>version:</code> è¡Œã‚’å‰Šé™¤</p>
          </div>
        </details>
      </div>

      <div class="card">
        <h2>3. ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h2>
        <ul>
          <li>WSLå†…ã§ <code>node -v</code>, <code>npm -v</code>, <code>git --version</code>, <code>docker version</code> ãŒé€šã‚‹ã‹ï¼Ÿ</li>
          <li>Docker Desktop ãŒ "Engine running" ã‹ï¼Ÿ</li>
          <li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ <code>/home/&lt;user&gt;</code> ã«ç½®ã‹ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ</li>
          <li>SSHã‚­ãƒ¼ã¯ WSL å†…ã§ä½œã£ã¦ GitHub ã«ç™»éŒ²ã—ãŸã‹ï¼Ÿ</li>
        </ul>
      </div>
    </div>
  </div>
<script>
  const toggleBtn = document.getElementById('toggleTheme');
  function setTheme(mode){
    if(mode==='dark'){ document.body.classList.add('dark'); }
    else{ document.body.classList.remove('dark'); }
    localStorage.setItem('wsl-theme', mode);
  }
  toggleBtn.addEventListener('click', ()=>{
    const isDark = document.body.classList.toggle('dark');
    localStorage.setItem('wsl-theme', isDark ? 'dark' : 'light');
  });
  // åˆæœŸãƒ†ãƒ¼ãƒ
  const saved = localStorage.getItem('wsl-theme');
  if(saved==='dark'){ document.body.classList.add('dark'); }
</script>
</body>
</html>
